<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>MP3 - Thomas Woo</title><meta description="动态图像专家组-1 或 动态图像专家组-2 音频层III（MPEG-1 or MPEG-2 Audio Layer III），常简称为 MP3"><meta property="og:type" content="blog"><meta property="og:title" content="MP3"><meta property="og:url" content="http://smileorigin.site/media/MP3/"><meta property="og:site_name" content="Thomas Woo"><meta property="og:description" content="动态图像专家组-1 或 动态图像专家组-2 音频层III（MPEG-1 or MPEG-2 Audio Layer III），常简称为 MP3"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/smileorigin/images/2021/20210831172935.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/smileorigin/images/2021/20210831140828.png"><meta property="article:published_time" content="2021-09-09T12:30:00.000Z"><meta property="article:modified_time" content="2022-12-12T07:29:23.809Z"><meta property="article:author" content="Thomas Woo"><meta property="article:tag" content="MultiMedia"><meta property="article:tag" content="MP3"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://cdn.jsdelivr.net/gh/smileorigin/images/2021/20210831172935.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://smileorigin.site/media/MP3/"},"headline":"Thomas Woo","image":["https://cdn.jsdelivr.net/gh/smileorigin/images/2021/20210831172935.png","https://cdn.jsdelivr.net/gh/smileorigin/images/2021/20210831140828.png"],"datePublished":"2021-09-09T12:30:00.000Z","dateModified":"2022-12-12T07:29:23.809Z","author":{"@type":"Person","name":"Thomas Woo"},"description":"动态图像专家组-1 或 动态图像专家组-2 音频层III（MPEG-1 or MPEG-2 Audio Layer III），常简称为 MP3"}</script><link rel="canonical" href="http://smileorigin.site/media/MP3/"><link rel="alternative" href="/atom.xml" title="Thomas Woo" type="application/atom+xml"><link rel="icon" href="/img/favicon.ico"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><script>var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?33cec7dfd968d9ffd9ff2a5da2be77d0";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-110922455-1" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-110922455-1');</script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css"></head><body class="is-2-column"><script type="text/javascript" src="/js/dark.js"></script><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">SMILEORIGIN</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/album">Album</a><a class="navbar-item" href="/bbs">BBS</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" id="dark-switch" title="Dark Mode" href="javascript:;"><i class="fas fa-moon" id="dark-icon"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-12-tablet is-9-desktop is-9-widescreen "><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2021-09-09T12:30:00.000Z" title="2021-09-09T12:30:00.000Z">2021-09-09</time><span class="level-item"><a class="link-muted" href="/categories/MultiMedia/">MultiMedia</a></span><span class="level-item">35 分钟 读完 (大约 5215 个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">MP3</h1><div class="content"><p><strong>动态图像专家组-1</strong> 或 <strong>动态图像专家组-2</strong> <strong>音频层III</strong>（<strong>MPEG-1</strong> or <strong>MPEG-2 Audio Layer III</strong>），常简称为 <strong>MP3</strong><a id="more"></a>，是当今流行的一种<a href="https://zh.wikipedia.org/wiki/%E6%95%B0%E5%AD%97%E9%9F%B3%E9%A2%91">数字音频</a>编码和<a href="https://zh.wikipedia.org/wiki/%E6%9C%89%E6%90%8D%E6%95%B8%E6%93%9A%E5%A3%93%E7%B8%AE">有损压缩</a>格式，它被设计来大幅降低音频数据量，通过舍弃 <a href="https://zh.wikipedia.org/wiki/%E8%84%89%E5%86%B2%E7%BC%96%E7%A0%81%E8%B0%83%E5%88%B6">PCM</a> 音频资料中对人类听觉不重要的部分，达成压缩成较小文件的目的。而对于大多数用户的听觉感受来说，MP3 的音质与最初的不压缩音频相比没有明显的下降。它是在 1991 年，由位于<a href="https://zh.wikipedia.org/wiki/%E5%BE%B7%E5%9B%BD">德国</a><a href="https://zh.wikipedia.org/wiki/%E5%9F%83%E5%B0%94%E6%9C%97%E6%A0%B9">埃尔朗根</a>的研究组织<a href="https://zh.wikipedia.org/wiki/%E5%BC%97%E5%8A%B3%E6%81%A9%E9%9C%8D%E5%A4%AB%E5%8D%8F%E4%BC%9A">弗劳恩霍夫协会</a>的一组工程师发明和标准化的</p>
<p>它根据压缩质量和编码复杂程度划分为三层，即Layer-1、Layer2、Layer3， 且分别对应MP1、MP2、MP3 这三种声音文件，并根据不同的用途，使用不同层次的编码</p>
<p>MP1 和MP2 的压缩率分别为 4:1 和 6:1-8:1，而 MP3 的压缩率则高达10:1-12:1</p>
<h2 id="比特率"><a href="#比特率" class="headerlink" title="比特率"></a>比特率</h2><p><a href="https://zh.wikipedia.org/wiki/%E4%BD%8D%E5%85%83%E7%8E%87">比特率</a>对于 MP3 文件来说是可变的。总的原则是比特率越高则声音文件中包含的原始声音信息越多，这样回放时声音质量也越高。在MP3 编码的早期，整个文件使用一个固定的比特率，称为<a href="https://zh.wikipedia.org/wiki/%E5%9B%BA%E5%AE%9A%E7%A0%81%E7%8E%87">固定码率</a>（CBR）</p>
<p>MPEG-1 Layer 3 允许使用的比特率是 32、40、48、56、64、80、96、112、128、160、192、224、256 和 320 kbit&#x2F;s，允许的采样频率是 32、44.1 和 48千<a href="https://zh.wikipedia.org/wiki/%E8%B5%AB%E5%85%B9">赫兹</a>，44.1kHz 是最为经常使用的速度（与 <a href="https://zh.wikipedia.org/wiki/CD">CD</a> 的采样速率相同）。MPEG-2 和 MPEG-2.5（非正式的） 包括其他一些比特率：6、12、24、32、40、48、56、64、80、96、112、128、144、160kbit&#x2F;s</p>
<p><a href="https://zh.wikipedia.org/wiki/%E5%8F%AF%E5%8F%98%E7%A0%81%E7%8E%87">可变码率</a>（VBR）也是可能的。MP3 文件的中的音频切分成有自己不同比特率的帧，这样在文件编码的时候就可以动态地改变比特率。尽管在最初的实现中并没有这项功能。VBR技术现在音频&#x2F;视频编码领域已经得到了广泛的应用，这项技术使得在声音变化大的部分使用较大的比特率而在声音变化小的部分使用较小的比特率成为可能。这个方法类似于声音控制的磁带录音机不记录静止部分节省磁带消耗。一些编码器在很大程度上依赖于这项技术</p>
<img src="https://cdn.jsdelivr.net/gh/smileorigin/images/2021/20210831172935.png" style="zoom:50%;" />

<h2 id="设计限制"><a href="#设计限制" class="headerlink" title="设计限制"></a>设计限制</h2><p>MP3 格式存有设计限制，即使使用更好的编码器仍旧不能克服这些限制。一些新的压缩格式如 <a href="https://zh.wikipedia.org/wiki/Opus_(%E9%9F%B3%E9%A2%91%E6%A0%BC%E5%BC%8F)">Opus</a> 等不再有这些限制。</p>
<ul>
<li>比特率最大是 320 kbit&#x2F;s，时间分辨率相对于变化迅速的信号来说太低</li>
<li>对于超过 15.5&#x2F;15.8 <a href="https://zh.wikipedia.org/wiki/KHz">kHz</a>的频率没有因数频带，即超过此频率的声音无法编码在 MP3 内，从<a href="https://zh.wikipedia.org/wiki/%E9%A2%91%E8%B0%B1">频谱</a>来看，15 kHz以上的声音全部消失了，而人耳的<a href="https://zh.wikipedia.org/wiki/%E5%90%AC%E8%A7%89">听觉</a>上限一般在20 kHz</li>
<li>采样频率最高为 48kHz，对于超过 48kHz 采样频率的音频无法编码在 MP3 内</li>
<li><a href="https://zh.wikipedia.org/w/index.php?title=%E8%81%94%E5%90%88%E7%AB%8B%E4%BD%93%E5%A3%B0&action=edit&redlink=1">联合立体声</a>（Joint stereo）是基于帧与帧完成的</li>
<li>没有定义<a href="https://zh.wikipedia.org/w/index.php?title=Encoder&action=edit&redlink=1">编码器</a>／<a href="https://zh.wikipedia.org/w/index.php?title=Decoder&action=edit&redlink=1">解码器</a>的整体时延，这就意味着 <a href="https://zh.wikipedia.org/w/index.php?title=Gapless_playback&action=edit&redlink=1">gapless playback</a> 缺少一个正式的规定</li>
</ul>
<h2 id="格式分析"><a href="#格式分析" class="headerlink" title="格式分析"></a>格式分析</h2><h3 id="MP3-Structure"><a href="#MP3-Structure" class="headerlink" title="MP3 Structure"></a>MP3 Structure</h3><table>
<thead>
<tr>
<th>名称</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>TAG_V2(ID3v2)</td>
<td>包含了作者、作曲、专辑等信息，长度不固定，扩展了 ID3v1 的信息量</td>
</tr>
<tr>
<td>音频数据</td>
<td>1. 音频数据由系列的数据帧构成<br />2. 每个帧的长度可能固定，也可能不固定，由位率（码率）决定<br />3. 每个帧都包括：帧头、数据实体两部分<br />4. 帧头记录着 MP3 的位率、采样率、版本等信息<br />5. 如果启用 CRC 验证，则帧头后面跟随两字节 CRC 校验<br />    之后可能跟随 32 字节的附加信息，也可能没有附加信息</td>
</tr>
<tr>
<td>TAG_V1(ID3v1)</td>
<td>包含了作者、作曲、专辑等信息，长度为 128byte</td>
</tr>
<tr>
<td>其他信息</td>
<td>部分 MP3 可能一些额外的信息</td>
</tr>
</tbody></table>
<p><img src="https://cdn.jsdelivr.net/gh/smileorigin/images/2021/20210831140828.png"></p>
<p>MP3 文件的结构图（不支持 MPEG 2.5 版，因此 MP3 同步字为 12 位而不是 11 位）(图来自 MP3 Wiki)</p>
<h3 id="ID3v2"><a href="#ID3v2" class="headerlink" title="ID3v2"></a>ID3v2</h3><p>ID3v2 一共有四个版本，<strong>ID3v2.1&#x2F;2.2&#x2F;2.3&#x2F;2.4</strong>，目前流行的播放软件一般只支持第三版即 ID3v2.3</p>
<p>ID3v2.3 由一个标签头和若干个标签帧或者一个扩展标签头组成，至少要有一个标签帧，每一个标签帧记录一种信息，例如作曲、标题等</p>
<p><strong>本章节描述的是 ID3v2.3</strong></p>
<h4 id="ID3v2-header"><a href="#ID3v2-header" class="headerlink" title="ID3v2 header"></a>ID3v2 header</h4><table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>示例值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>ID3v2&#x2F;file identifier</td>
<td>char[3]</td>
<td>“ID3”</td>
<td>ID3v2 为 “ID3”</td>
</tr>
<tr>
<td>ID3v2 version</td>
<td>uint16_t</td>
<td>0x03 0x00</td>
<td>前一个字节表示主版本号，后一个字节表示修订版本号</td>
</tr>
<tr>
<td>ID3v2 flags</td>
<td>uint8_t</td>
<td>abc00000</td>
<td>目前只使用最高的 3 位，其他位为 0<br />a: 是否使用 unsynchronisation<br />b: 是否有 extended header<br />c: 是否为测试标签</td>
</tr>
<tr>
<td>ID3v2 size</td>
<td>uint32_t</td>
<td>4 * 0xxxxxxx</td>
<td>4字节，每个字节只能用低 7 位，最高位为 0<br />0x00 0x00 0x02 0x01 &#x3D; 257</td>
</tr>
</tbody></table>
<h4 id="ID3v2-extended-header"><a href="#ID3v2-extended-header" class="headerlink" title="ID3v2 extended header"></a>ID3v2 extended header</h4><table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>Extended header size</td>
<td>uint32_t</td>
<td>ID3v2 扩展头大小，不包括该字段本身</td>
</tr>
<tr>
<td>Extended Flags</td>
<td>uint16_t</td>
<td>此字段虽然占用两个字节，但是除了首个字节的最高位，其余各位都不使用，且必须为 0。如果首字节的最高位被置 1，那么 ID3v2 扩展头将会多一个字段  ”Total frame CRC“。CRC32 是一种循环冗余校验技术，为了发现标签数据在传输或存储过程中可能出现的错误，使用 CRC32 算法先对标签数据进行一个次运算，这次运算得出的结果是 32 个二进制位。如果标签数据在传输或存储过程中保持原样不变，在这 32 个二进制位的参与下对数据再次进行运算结果一定会是 32 个二进制 0。若 32 位结果中任何一位不是 0，则说明数据在传输或存储的某个环节中已经出现了差错。这里所说的 CRC32 数据指的就是传输或存储之前对数据运算所得的32 个二进制位，显然它必须占用 4 个字节的存储空间，此时的 ID3v2 扩展头大小也就变成了 14 个字节。因此前面所提 “Extended header size” 字段在这种情况存储的值也就变成了 14-4&#x3D;10。需要注意的是，对标签数据的 CRC32 运算应该在 unsynchronisation 方案应用于标签数据之前进行</td>
</tr>
<tr>
<td>Size of padding</td>
<td>uint32_t</td>
<td>ID3v2占据了文件的头部，ID3v2后面才是音频帧数据。如果 ID3v2 需要扩大以容纳更多的标签数据，那么音频帧数据也需在文件中向后搬移。为了避免这种情况频繁发生，ID3v2 在其结构尾部预留了一定的存储空间，如果 ID3v2 的扩大没有超出这些预留空间，那就不需要向后移动音频帧的位置了。这些预留的存储空间被称为 pading，由于在 ID3v2 需要扩大之前 padding 空间并未存储有意义的数据，所以 padding 空间中的每个字节都存储着 0x00。padding 空间不参与 CRC 校验运算</td>
</tr>
<tr>
<td>Total frame CRC</td>
<td>uint32_t</td>
<td>只有 Extended Flags 首字节最高位为 1 才会存在该字段。此字段占用 4 个字节。CRC 校验仅限于标签数据本身，ID3v2 头和 ID3v2 扩展头都不参与其中，padding 数据也不参与 CRC 校验</td>
</tr>
</tbody></table>
<h4 id="ID3v2-frame-header"><a href="#ID3v2-frame-header" class="headerlink" title="ID3v2 frame header"></a>ID3v2 frame header</h4><table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>Frame ID</td>
<td>char[4]</td>
<td>帧标识</td>
</tr>
<tr>
<td>Size</td>
<td>uint32_t</td>
<td>帧内容大小，不包括帧头，不小于 1</td>
</tr>
<tr>
<td>Flags</td>
<td>uint16_t</td>
<td>见 Frame header flags</td>
</tr>
</tbody></table>
<h5 id="Declared-ID3v2-frames"><a href="#Declared-ID3v2-frames" class="headerlink" title="Declared ID3v2 frames"></a>Declared ID3v2 frames</h5><table>
<thead>
<tr>
<th>Frame ID（ID3v2.3）</th>
<th>Frame ID（ID3v2.4）</th>
<th align="left">英文描述</th>
<th>中文描述</th>
</tr>
</thead>
<tbody><tr>
<td>AENC</td>
<td>ARNC</td>
<td align="left">Audio encryption</td>
<td>音频是否加密</td>
</tr>
<tr>
<td>-</td>
<td><strong>ASPI</strong></td>
<td align="left">Audio seek point index</td>
<td>音频搜索点索引</td>
</tr>
<tr>
<td>APIC</td>
<td>APIC</td>
<td align="left">Attached picture</td>
<td>封面图片</td>
</tr>
<tr>
<td>COMM</td>
<td>COMM</td>
<td align="left">Comments</td>
<td>格式：”eng&#x2F;0 备注内容”，其中 eng 表示备注所使用的自然语言</td>
</tr>
<tr>
<td>COMR</td>
<td>COMR</td>
<td align="left">Commercial frame</td>
<td>广告</td>
</tr>
<tr>
<td>ENCR</td>
<td>ENCR</td>
<td align="left">Encryption method registration</td>
<td>加密方法，同 AENC 一同使用</td>
</tr>
<tr>
<td>EQUA</td>
<td><strong>EQU2</strong></td>
<td align="left">Equalization</td>
<td>均衡器，允许用户在文件中预先定义均衡曲线</td>
</tr>
<tr>
<td>ETCO</td>
<td>ETCO</td>
<td align="left">Event timing codes</td>
<td>事件时间编码</td>
</tr>
<tr>
<td>GEOB</td>
<td>GEOB</td>
<td align="left">General encapsulated object</td>
<td>通用封装对象</td>
</tr>
<tr>
<td>GRID</td>
<td>GRID</td>
<td align="left">Group identification registration</td>
<td>能够对其他不相关的帧进行分组</td>
</tr>
<tr>
<td>IPLS</td>
<td><strong>TIPL</strong></td>
<td align="left">Involved people list</td>
<td>参与人员名单</td>
</tr>
<tr>
<td>LINK</td>
<td>LINK</td>
<td align="left">Linked information</td>
<td>外部 ID3v2 标签链接</td>
</tr>
<tr>
<td>MCDI</td>
<td>MCDI</td>
<td align="left">Music CD identifier</td>
<td>CD 音乐标识</td>
</tr>
<tr>
<td>MLLT</td>
<td>MLLT</td>
<td align="left">MPEG location lookup table</td>
<td>时间位置对照表</td>
</tr>
<tr>
<td>OWNE</td>
<td>OWNE</td>
<td align="left">Ownership frame</td>
<td>所有权</td>
</tr>
<tr>
<td>PRIV</td>
<td>PRIV</td>
<td align="left">Private frame</td>
<td>用于存储软件生产商自定义的信息</td>
</tr>
<tr>
<td>PCNT</td>
<td>PCNT</td>
<td align="left">Play counter</td>
<td>文件播放次数计数器</td>
</tr>
<tr>
<td>POPM</td>
<td>POPM</td>
<td align="left">Popularimeter</td>
<td>普通仪表</td>
</tr>
<tr>
<td>POSS</td>
<td>POSS</td>
<td align="left">Position synchronisation frame</td>
<td>第一帧时间偏移量</td>
</tr>
<tr>
<td>RBUF</td>
<td>RBUF</td>
<td align="left">Recommended buffer size</td>
<td>推荐缓冲区大小</td>
</tr>
<tr>
<td>RVAD</td>
<td><strong>RVA2</strong></td>
<td align="left">Relative volume adjustment</td>
<td>音量调节器</td>
</tr>
<tr>
<td>RVRB</td>
<td>RVRB</td>
<td align="left">Reverb</td>
<td>混响调整</td>
</tr>
<tr>
<td>-</td>
<td><strong>SEEK</strong></td>
<td align="left">Seek frame</td>
<td>搜索用</td>
</tr>
<tr>
<td>-</td>
<td><strong>SIGN</strong></td>
<td align="left">Signature frame</td>
<td>签名用</td>
</tr>
<tr>
<td>SYLT</td>
<td>SYLT</td>
<td align="left">Synchronized lyric&#x2F;text</td>
<td>同步歌词或文本</td>
</tr>
<tr>
<td>SYTC</td>
<td>SYTC</td>
<td align="left">Synchronized tempo codes</td>
<td>同步节拍编码</td>
</tr>
<tr>
<td>TALB</td>
<td>TALB</td>
<td align="left">Album&#x2F;Movie&#x2F;Show title</td>
<td>专集</td>
</tr>
<tr>
<td>TBPM</td>
<td>TBPM</td>
<td align="left">Beats per minute (BPM)</td>
<td>拍子</td>
</tr>
<tr>
<td>TCOM</td>
<td>TCOM</td>
<td align="left">Composer</td>
<td>作曲家</td>
</tr>
<tr>
<td>TCON</td>
<td>TCON</td>
<td align="left">Content type</td>
<td>音乐类型，直接用字符串表示</td>
</tr>
<tr>
<td>TCOP</td>
<td>TCOP</td>
<td align="left">Copyright message</td>
<td>版权</td>
</tr>
<tr>
<td>TDAT</td>
<td>TDRC</td>
<td align="left">TDAT Date</td>
<td>灌录日期</td>
</tr>
<tr>
<td>-</td>
<td><strong>TDEN</strong></td>
<td align="left">Encoding time</td>
<td>编码时间</td>
</tr>
<tr>
<td>TDLY</td>
<td>TDLY</td>
<td align="left">Playlist delay</td>
<td>播放延时</td>
</tr>
<tr>
<td>-</td>
<td><strong>TDRC</strong></td>
<td align="left">Recording time</td>
<td>音频纪录时间</td>
</tr>
<tr>
<td>-</td>
<td><strong>TDRL</strong></td>
<td align="left">Release time</td>
<td>音频发行时间</td>
</tr>
<tr>
<td>-</td>
<td><strong>TDTG</strong></td>
<td align="left">Tagging time</td>
<td>音频被标记时间</td>
</tr>
<tr>
<td>TENC</td>
<td>TENC</td>
<td align="left">Encoded by</td>
<td>编码者</td>
</tr>
<tr>
<td>TEXT</td>
<td>TEXT</td>
<td align="left">Lyricist&#x2F;Text writer</td>
<td>填词人</td>
</tr>
<tr>
<td>TFLT</td>
<td>TFLT</td>
<td align="left">File type</td>
<td>文件类型</td>
</tr>
<tr>
<td>TIME</td>
<td><strong>TDRC</strong></td>
<td align="left">Time</td>
<td>灌录的时间</td>
</tr>
<tr>
<td>TIT1</td>
<td>TIT1</td>
<td align="left">Content group description</td>
<td>内容组别</td>
</tr>
<tr>
<td>TIT2</td>
<td>TIT2</td>
<td align="left">Title&#x2F;songname&#x2F;content description</td>
<td>标题</td>
</tr>
<tr>
<td>TIT3</td>
<td>TIT3</td>
<td align="left">Subtitle&#x2F;Description refinement</td>
<td>歌名副标题</td>
</tr>
<tr>
<td>TKEY</td>
<td>TKEY</td>
<td align="left">Initial key</td>
<td>音调</td>
</tr>
<tr>
<td>TLAN</td>
<td>TLAN</td>
<td align="left">Language(s)</td>
<td>语言</td>
</tr>
<tr>
<td>TLEN</td>
<td>TLEN</td>
<td align="left">Length</td>
<td>音频长度</td>
</tr>
<tr>
<td>-</td>
<td><strong>TMCL</strong></td>
<td align="left">Musician credits list</td>
<td>音乐家与乐器对照</td>
</tr>
<tr>
<td>TMED</td>
<td>TMED</td>
<td align="left">Media type</td>
<td>媒体类型</td>
</tr>
<tr>
<td>-</td>
<td><strong>TMOO</strong></td>
<td align="left">Mood</td>
<td>情境</td>
</tr>
<tr>
<td>TOAL</td>
<td>TOAL</td>
<td align="left">Original album&#x2F;movie&#x2F;show title</td>
<td>原唱片集</td>
</tr>
<tr>
<td>TOFN</td>
<td>TOFN</td>
<td align="left">Original filename</td>
<td>原文件名</td>
</tr>
<tr>
<td>TOLY</td>
<td>TOLY</td>
<td align="left">Original lyricist(s)&#x2F;text writer(s)</td>
<td>原歌词</td>
</tr>
<tr>
<td>TOPE</td>
<td>TOPE</td>
<td align="left">Original artist(s)&#x2F;performer(s)</td>
<td>原艺术家&#x2F;演唱者</td>
</tr>
<tr>
<td>TORY</td>
<td><strong>TDOR</strong></td>
<td align="left">Original release year</td>
<td>原发行年份</td>
</tr>
<tr>
<td>TOWN</td>
<td>TOWN</td>
<td align="left">File owner&#x2F;licensee</td>
<td>文件所有者</td>
</tr>
<tr>
<td>TPE1</td>
<td>TPE1</td>
<td align="left">Lead performer(s)&#x2F;Soloist(s)</td>
<td>作者</td>
</tr>
<tr>
<td>TPE2</td>
<td>TPE2</td>
<td align="left">Band&#x2F;orchestra&#x2F;accompaniment</td>
<td>乐队&#x2F;管弦乐队&#x2F;伴奏</td>
</tr>
<tr>
<td>TPE3</td>
<td>TPE3</td>
<td align="left">Conductor&#x2F;performer refinement</td>
<td>指挥家</td>
</tr>
<tr>
<td>TPE4</td>
<td>TPE4</td>
<td align="left">Interpreted, remixed, or otherwise modified by</td>
<td>翻唱&#x2F;混音&#x2F;改编</td>
</tr>
<tr>
<td>TPOS</td>
<td>TPOS</td>
<td align="left">Part of a set</td>
<td>片段来源</td>
</tr>
<tr>
<td>-</td>
<td><strong>TPRO</strong></td>
<td align="left">Produced notice</td>
<td>Produced notice</td>
</tr>
<tr>
<td>TPUB</td>
<td>TPUB</td>
<td align="left">Publisher</td>
<td>出版商</td>
</tr>
<tr>
<td>TRCK</td>
<td>TRCK</td>
<td align="left">Track number&#x2F;Position in set</td>
<td>音轨，格式: N&#x2F;M，其中 N 为专集中的第 N 首，<br />M 为专集中共 M 首，N 和 M 为 ASCII 码表示的数字</td>
</tr>
<tr>
<td>TRDA</td>
<td><strong>TDRC</strong></td>
<td align="left">Recording dates</td>
<td>灌录时期</td>
</tr>
<tr>
<td>TRSN</td>
<td>TRSN</td>
<td align="left">Internet radio station name</td>
<td>网络电台名称</td>
</tr>
<tr>
<td>TRSO</td>
<td>TRSO</td>
<td align="left">Internet radio station owner</td>
<td>网络电台所有者</td>
</tr>
<tr>
<td>TSIZ</td>
<td><strong>弃用</strong></td>
<td align="left">Size</td>
<td>音频长度</td>
</tr>
<tr>
<td>-</td>
<td><strong>TSOA</strong></td>
<td align="left">Album sort order</td>
<td>依专辑排序</td>
</tr>
<tr>
<td>-</td>
<td><strong>TSOP</strong></td>
<td align="left">Performer sort order</td>
<td>依演出者排序</td>
</tr>
<tr>
<td>-</td>
<td><strong>TSOT</strong></td>
<td align="left">Title sort order</td>
<td>依标题排序</td>
</tr>
<tr>
<td>TSRC</td>
<td>TSRC</td>
<td align="left">ISRC (international standard recording code)</td>
<td>国际灌录编码标准</td>
</tr>
<tr>
<td>TSSE</td>
<td>TSSE</td>
<td align="left">Software&#x2F;Hardware and settings used for encoding</td>
<td>编码使用的 软件&#x2F;硬件 设置</td>
</tr>
<tr>
<td>-</td>
<td><strong>TSST</strong></td>
<td align="left">Set subtitle</td>
<td>设置字幕</td>
</tr>
<tr>
<td>TYER</td>
<td><strong>TDRC</strong></td>
<td align="left">Year</td>
<td>年代，是用 ASCII 码表示的数字</td>
</tr>
<tr>
<td>TXXX</td>
<td>TXXX</td>
<td align="left">User defined text information frame</td>
<td>年度</td>
</tr>
<tr>
<td>UFID</td>
<td>UFID</td>
<td align="left">Unique file identifier</td>
<td>唯一的文件标识符</td>
</tr>
<tr>
<td>USER</td>
<td>USER</td>
<td align="left">Terms of use</td>
<td>使用条款</td>
</tr>
<tr>
<td>USLT</td>
<td>USLT</td>
<td align="left">Unsychronized lyric&#x2F;text transcription</td>
<td>歌词</td>
</tr>
<tr>
<td>WCOM</td>
<td>WCOM</td>
<td align="left">Commercial information</td>
<td>广告信息</td>
</tr>
<tr>
<td>WCOP</td>
<td>WCOP</td>
<td align="left">Copyright&#x2F;Legal information</td>
<td>版权信息</td>
</tr>
<tr>
<td>WOAF</td>
<td>WOAF</td>
<td align="left">Official audio file webpage</td>
<td>官方音频文件网页</td>
</tr>
<tr>
<td>WOAR</td>
<td>WOAR</td>
<td align="left">Official artist&#x2F;performer webpage</td>
<td>官方艺术家网页</td>
</tr>
<tr>
<td>WOAS</td>
<td>WOAS</td>
<td align="left">Official audio source webpage</td>
<td>官方音频原始资料网页</td>
</tr>
<tr>
<td>WORS</td>
<td>WORS</td>
<td align="left">Official internet radio station homepage</td>
<td>官方互联网无线配置首页</td>
</tr>
<tr>
<td>WPAY</td>
<td>WPAY</td>
<td align="left">Payment</td>
<td>付款</td>
</tr>
<tr>
<td>WPUB</td>
<td>WPUB</td>
<td align="left">Publishers official webpage</td>
<td>出版商官方网页</td>
</tr>
<tr>
<td>WXXX</td>
<td>WXXX</td>
<td align="left">User defined URL link frame</td>
<td>用户自定义 URL 链接</td>
</tr>
</tbody></table>
<h5 id="Frame-header-flags"><a href="#Frame-header-flags" class="headerlink" title="Frame header flags"></a>Frame header flags</h5><p>Flags 字段定义：<code>%abc00000 %ijk00000</code></p>
<table>
<thead>
<tr>
<th>字段</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>a</td>
<td>标签保护标志。设置时认为此帧作废</td>
</tr>
<tr>
<td>b</td>
<td>文件保护标记。设置时认为此帧作废</td>
</tr>
<tr>
<td>c</td>
<td>只读标志。设置时认为此帧不能修改</td>
</tr>
<tr>
<td>d</td>
<td>压缩标志。设置时一个字节存放两个 BCD 码表示数字</td>
</tr>
<tr>
<td>e</td>
<td>加密标志</td>
</tr>
<tr>
<td>f</td>
<td>组标志。设置时说明此帧和其他的某帧是一组</td>
</tr>
</tbody></table>
<h3 id="MP3-Frame"><a href="#MP3-Frame" class="headerlink" title="MP3 Frame"></a>MP3 Frame</h3><p>MP3 Frame &#x3D; MP3 Header + MP3 Data</p>
<h4 id="Frame-Header"><a href="#Frame-Header" class="headerlink" title="Frame Header"></a>Frame Header</h4><table>
<thead>
<tr>
<th>名称</th>
<th>位长</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>同步信息</td>
<td>11</td>
<td>所有位均为 1</td>
</tr>
<tr>
<td>版本</td>
<td>2</td>
<td>00-MPEG 2.5<br />01-未定义<br />10-MPEG 2<br />11-MPEG 1</td>
</tr>
<tr>
<td>层</td>
<td>2</td>
<td>00-未定义<br />01-Layer 3<br />10-Layer 2<br />11-Layer 1</td>
</tr>
<tr>
<td>CRC 校验</td>
<td>1</td>
<td>0-校验    1-不校验</td>
</tr>
<tr>
<td>比特率</td>
<td>4</td>
<td>取样率，单位是 kbps，例如：采用 MPEG-1 Layer 3，64kbps，值为 0101<br /><strong>具体参照比特率对照表</strong></td>
</tr>
<tr>
<td>采样率</td>
<td>2</td>
<td>MPEG-1：    00-44.1kHz        01-48kHz 10-32kHz    11-未定义<br/>MPEG-2：    00-22.05kHz      01-24kHz 10-16kHz    11-未定义<br/>MPEG-2.5： 00-11.025kHz    01-12kHz 10-8kHz      11-未定义</td>
</tr>
<tr>
<td>帧长调节</td>
<td>1</td>
<td>用来调整文件头长度，0-无需调整，1-调整，具体调整计算方法见下文</td>
</tr>
<tr>
<td>保留字</td>
<td>1</td>
<td></td>
</tr>
<tr>
<td>声道模式</td>
<td>2</td>
<td>00-立体声 Stereo<br />01-Joint Stereo<br />10-双声道<br />11-单声道</td>
</tr>
<tr>
<td>扩充模式</td>
<td>2</td>
<td>当声道模式为 01 时才使用<br/>Value   强度立体声    MS立体声<br/>  00              off                off<br/>  01              on                off<br/>  10              off                on<br/>  11              on                on</td>
</tr>
<tr>
<td>版权</td>
<td>1</td>
<td>文件是否合法<br />0-不合法<br />1-合法</td>
</tr>
<tr>
<td>原版标志</td>
<td>1</td>
<td>是否原版<br />0-非原版<br />1-原版</td>
</tr>
<tr>
<td>强调方式</td>
<td>2</td>
<td>用于声音经降噪压缩后再补偿的分类，很少用到，今后也可能不会用<br/>00-未定义<br />01-50&#x2F;15ms<br />10-保留<br />11-CCITT J.17</td>
</tr>
</tbody></table>
<h5 id="Bitrate-index"><a href="#Bitrate-index" class="headerlink" title="Bitrate index"></a>Bitrate index</h5><p>单位 <strong>kbps</strong></p>
<table>
<thead>
<tr>
<th>bits</th>
<th>V1,L1</th>
<th>V1,L2</th>
<th>V1,L3</th>
<th>V2,L1</th>
<th>V2,L2</th>
<th>V2,L3</th>
</tr>
</thead>
<tbody><tr>
<td>0000</td>
<td>free</td>
<td>free</td>
<td>free</td>
<td>free</td>
<td>free</td>
<td>free</td>
</tr>
<tr>
<td>0001</td>
<td>32</td>
<td>32</td>
<td>32</td>
<td>32(32)</td>
<td>32(8)</td>
<td>8(8)</td>
</tr>
<tr>
<td>0010</td>
<td>64</td>
<td>48</td>
<td>40</td>
<td>64(48)</td>
<td>48(16)</td>
<td>16(16)</td>
</tr>
<tr>
<td>0011</td>
<td>96</td>
<td>54</td>
<td>48</td>
<td>96(56)</td>
<td>56(24)</td>
<td>24(24)</td>
</tr>
<tr>
<td>0100</td>
<td>128</td>
<td>64</td>
<td>56</td>
<td>128(64)</td>
<td>64(32)</td>
<td>32 (32)</td>
</tr>
<tr>
<td>0101</td>
<td>160</td>
<td>80</td>
<td>64</td>
<td>160(80)</td>
<td>80(40)</td>
<td>64 (40)</td>
</tr>
<tr>
<td>0110</td>
<td>192</td>
<td>96</td>
<td>80</td>
<td>192(96)</td>
<td>96(48)</td>
<td>80 (48)</td>
</tr>
<tr>
<td>0111</td>
<td>224</td>
<td>112</td>
<td>96</td>
<td>224(112)</td>
<td>112(56)</td>
<td>56 (56)</td>
</tr>
<tr>
<td>1000</td>
<td>256</td>
<td>128</td>
<td>112</td>
<td>256(128)</td>
<td>128(64)</td>
<td>64 (64)</td>
</tr>
<tr>
<td>1001</td>
<td>288</td>
<td>160</td>
<td>128</td>
<td>288(144)</td>
<td>160(80)</td>
<td>128 (80)</td>
</tr>
<tr>
<td>1010</td>
<td>320</td>
<td>192</td>
<td>160</td>
<td>320(160)</td>
<td>192(96)</td>
<td>160 (96)</td>
</tr>
<tr>
<td>1011</td>
<td>352</td>
<td>224</td>
<td>192</td>
<td>352(176)</td>
<td>224(112)</td>
<td>112 (112</td>
</tr>
<tr>
<td>1100</td>
<td>384</td>
<td>256</td>
<td>224</td>
<td>384(192)</td>
<td>256(128)</td>
<td>128 (128)</td>
</tr>
<tr>
<td>1101</td>
<td>416</td>
<td>320</td>
<td>256</td>
<td>416(224)</td>
<td>320(144)</td>
<td>256 (144)</td>
</tr>
<tr>
<td>1110</td>
<td>448</td>
<td>384</td>
<td>320</td>
<td>448(256)</td>
<td>384(160)</td>
<td>320 (160)</td>
</tr>
<tr>
<td>1111</td>
<td>bad</td>
<td>bad</td>
<td>bad</td>
<td>bad</td>
<td>bad</td>
<td>bad</td>
</tr>
</tbody></table>
<p>名词说明：</p>
<p>V1 - MPEG 1，V2 - MPEG 2 and MPEG 2.5</p>
<p>L1 - Layer 1，L2 - Layer 2，L3 - Layer 3</p>
<p>“free” 表示位率可变，”bad” 表示不允许值</p>
<h4 id="Frame-Length"><a href="#Frame-Length" class="headerlink" title="Frame Length"></a>Frame Length</h4><p>帧大小即每帧的采样数，表示一帧数据中采样的个数，该值是恒定的，如下表所示：</p>
<table>
<thead>
<tr>
<th></th>
<th>MPEG1</th>
<th>MPEG2(LSF)</th>
<th>MPEG2.5(LSF)</th>
</tr>
</thead>
<tbody><tr>
<td>Layer1</td>
<td>384</td>
<td>384</td>
<td>384</td>
</tr>
<tr>
<td>Layer2</td>
<td>1152</td>
<td>1152</td>
<td>1152</td>
</tr>
<tr>
<td>Layer3</td>
<td>1152</td>
<td>576</td>
<td>576</td>
</tr>
</tbody></table>
<p>帧长度是压缩时每一帧的长度，<strong>包括帧头的 4 个字节</strong>。它将填充的空位也计算在内。Layer 1 的一个空位长 4 字节，Layer 2 和 Layer 3 的空位是 1 字节。当读取 MPEG 文件时必须计算该值以便找到相邻的帧。注意：因为有填充和比特率变换，帧长度可能变化</p>
<p>计算公式如下：</p>
<ul>
<li>Layer 1：Len(字节) &#x3D; ((每帧采样数 &#x2F; 8 * 比特率) &#x2F; 采样频率) + 填充 * 4</li>
<li>Layer2&#x2F;3：Len(字节) &#x3D; ((每帧采样数 &#x2F; 8 * 比特率) &#x2F; 采样频率) + 填充</li>
</ul>
<p>例：MPEG1 Layer3 比特率 128000，采样率 44100，填充 0，<strong>帧长度</strong>为：</p>
<p>((1152 &#x2F; 8 * 128Kbps) &#x2F; 44.1kHz + 0 &#x3D; 417 字节</p>
<h4 id="Frame-Duration"><a href="#Frame-Duration" class="headerlink" title="Frame Duration"></a>Frame Duration</h4><p>每帧持续时间(毫秒) &#x3D; 每帧采样数 &#x2F; 采样频率 * 1000</p>
<p>例：1152 &#x2F; 441000 * 1000 &#x3D; 26ms</p>
<h4 id="Side-Info"><a href="#Side-Info" class="headerlink" title="Side Info"></a>Side Info</h4><p>Side Info 位于有效帧的数据区里对应大小如下：</p>
<table>
<thead>
<tr>
<th></th>
<th>MPEG 1</th>
<th>MPEG 2&#x2F;2.5 (LSF)</th>
</tr>
</thead>
<tbody><tr>
<td>Stereo, Joint Stereo, Dual Channel</td>
<td>32</td>
<td>17</td>
</tr>
<tr>
<td>Mono</td>
<td>17</td>
<td>9</td>
</tr>
</tbody></table>
<h3 id="Encoding"><a href="#Encoding" class="headerlink" title="Encoding"></a>Encoding</h3><p>对于 MP3 来说现在有两种编码方式，一种是 CBR，一种是 VBR</p>
<p><strong>CBR，固定位率</strong>。固定位率的帧的大小在整个文件中都是是固定的（公式如上所述），只要知道文件总长度，和从第一帧帧头读出的信息，就都可以通过计算得出这个 MP3 文件的信息，比如总的帧数，总的播放时间等等，要定位到某一帧或某个时间点也很方便，这种编码方式不需要文件头，第一帧开始就是音频数据</p>
<p><strong>VBR，可变位率</strong>。VBR 是 XING 公司推出的算法，所以在 MP3 的 FRAME 里会有 “Xing” 这个关键字（也有用”Info”来标识的，现在很多流行的小软件也可以进行 VBR 压缩，它们是否遵守这个约定，那就不得而知了），它存放在 MP3 文件中的第一个有效帧的数据区里，它标识了这个 MP3 文件是 VBR 的。同时第一个帧里存放了 MP3 文件的帧的总个数，这就很容易获得了播放总时间，同时还有 100 个字节存放了播放总时间的100 个时间分段的帧索引，假设 4 分钟的 MP3 歌曲，240s，分成 100 段，每两个相邻 INDEX 的时间差就是 2.4S，所以通过这个INDEX，只要前后处理少数的 FRAME，就能快速找出我们需要快进的帧头。其实这第一帧就相当于文件头了</p>
<p>不过现在有些编码器在编码 CBR 文件时也像 VBR 那样将信息记入第一帧，比如著名的 lame，它使用 “Info” 来做 CBR 的标记</p>
<h4 id="VBR-Header"><a href="#VBR-Header" class="headerlink" title="VBR Header"></a>VBR Header</h4><p>VBR 文件头位于 MP3 文件中第一个有效帧的数据区，详细结构如下：</p>
<table>
<thead>
<tr>
<th>位置</th>
<th>长度</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>4</td>
<td>VBR 头标记，4 个字节的 ASCII 字符，内容为 “Xing” 或者 “Info”</td>
<td>“Xing”</td>
</tr>
<tr>
<td>4</td>
<td>4</td>
<td>指示 VBR 头具体内容的标记，多种内容使用逻辑或组合：<br />0x0001-总帧数存储区域存在，不包括第一帧<br />0x0002-文件长度存储区域存在，不包括标签<br />0x0004-TOC 存储区域存在<br />0x0008-质量指示存储区域存在</td>
<td>0x0007（表示：总帧数、文件长度 和 TOC 存储区域存在）</td>
</tr>
<tr>
<td>8</td>
<td>4</td>
<td>帧数为大端双字（可选）</td>
<td>7344</td>
</tr>
<tr>
<td>8 or 12</td>
<td>4</td>
<td>文件字节数为大端双字（可选）</td>
<td>45000</td>
</tr>
<tr>
<td>8, 12 or 16</td>
<td>100</td>
<td>搜索作为整数字节的 100 个 TOC 条目（可选）</td>
<td></td>
</tr>
<tr>
<td>8, 12, 16, 108, 112 or 116</td>
<td>4</td>
<td>质量指标为大端双字<br/>从 0 - 最佳质量到，100 - 最差质量（可选）</td>
<td>0</td>
</tr>
</tbody></table>
<h4 id="VBRI-Header"><a href="#VBRI-Header" class="headerlink" title="VBRI Header"></a>VBRI Header</h4><p>目前此头信息，只有用 Fraunhofer 的编码器生成的 MPEG 音频文件，才会用到此头</p>
<table>
<thead>
<tr>
<th>位置</th>
<th>长度</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>4</td>
<td>VBRI 头 ID 用 4 字节 ASCII 字符表示，总是 “VBRI”，而不是以 NULL 结尾</td>
<td>“VBRI”</td>
</tr>
<tr>
<td>4</td>
<td>2</td>
<td>版本 ID， Big-Endian WORD</td>
<td>1</td>
</tr>
<tr>
<td>6</td>
<td>2</td>
<td>延迟，Big-Endian float</td>
<td>7344</td>
</tr>
<tr>
<td>8</td>
<td>2</td>
<td>质量指标</td>
<td>75</td>
</tr>
<tr>
<td>10</td>
<td>4</td>
<td>文件总字节数，Big-Endian DWORD</td>
<td>45000</td>
</tr>
<tr>
<td>14</td>
<td>4</td>
<td>文件总帧数，Big-Endian DWORD</td>
<td>7344</td>
</tr>
<tr>
<td>18</td>
<td>2</td>
<td>TOC 表的表项数目，Big-Endian WORD</td>
<td>100</td>
</tr>
<tr>
<td>20</td>
<td>2</td>
<td>TOC 表项的缩放因子，Big-Endian DWORD</td>
<td>1</td>
</tr>
<tr>
<td>22</td>
<td>2</td>
<td>单个 TOC 表项的大小，单位字节，最大为 4，Big-Endian WORD</td>
<td>2</td>
</tr>
<tr>
<td>24</td>
<td>2</td>
<td>帧数&#x2F;表项，Big-Endian WORD</td>
<td>845</td>
</tr>
<tr>
<td>26</td>
<td></td>
<td>用于检索的 TOC 表，整数值，可以通过每个表项大小乘以表项个数的到此 TOC 表的总大小，Big-Endian integral</td>
<td></td>
</tr>
</tbody></table>
<h4 id="Duration-calc"><a href="#Duration-calc" class="headerlink" title="Duration calc"></a>Duration calc</h4><p>对于能获取到总帧数的文件就可以计算出 MP3 的总时长</p>
<p>MP3 总时长（s） &#x3D; (每帧采样数 * 总帧数) &#x2F; 采样率</p>
<p>例如：(1152 * 8888) &#x2F; 48000 &#x3D; 213.312 s</p>
<h4 id="Seek"><a href="#Seek" class="headerlink" title="Seek"></a>Seek</h4><p>VBR 编码的 seek 操作主要是利用 Xing 头中的 TOC 表（如果这个表存在），<strong>TOC 表（Table Of Contents）</strong>是一个长度为 100 的 byte 数组，数组中每个元素都代表在音频时长内的一个特定的时间点对应的文件的相对位置。 简单的说，TOC 表的组成，就是把整个文件平均分成 256 段，每一段代表一个文件位置，再把总的音频时长平均分为 100 段，每一段代表一个时间点，然后对这 100 个时间点，每一个都找出 256 个文件位置中其对应的那个位置，这个位置是这 256 个位置中的相对位置，取值在 0~255，放在 TOC 表中</p>
<p>假设文件持续 200 秒，现在需要跳到 50 秒，文件长度为 1000000 byte，那么先用以下公式计算出 50 秒对应 TOC 表的哪个元素：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TOC[(<span class="number">50</span> / <span class="number">200</span>) * <span class="number">100</span>] = TOC[<span class="number">25</span>]</span><br></pre></td></tr></table></figure>

<p>然后在根据以下公式算出文件位置：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(TOC[<span class="number">25</span>] / <span class="number">256</span>) * <span class="number">1000000</span></span><br></pre></td></tr></table></figure>

<h3 id="FFMPEG-转换音频"><a href="#FFMPEG-转换音频" class="headerlink" title="FFMPEG 转换音频"></a>FFMPEG 转换音频</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># VBR</span></span><br><span class="line">ffmpeg -i demo.flac -vn -c:a libmp3lame -aq 4 -ac 2 demo.mp3</span><br><span class="line"><span class="comment"># CBR</span></span><br><span class="line">ffmpeg -i demo.flac -vn -c:a libmp3lame -b:a 192k -ac 2 demo.mp3</span><br></pre></td></tr></table></figure>

<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://id3.org/id3v2.3.0">https://id3.org/id3v2.3.0</a></li>
<li><a href="https://id3.org/id3v2.4.0-structure">https://id3.org/id3v2.4.0-structure</a></li>
<li><a href="https://zh.wikipedia.org/wiki/ID3">https://zh.wikipedia.org/wiki/ID3</a></li>
<li><a href="https://zh.wikipedia.org/wiki/MP3">https://zh.wikipedia.org/wiki/MP3</a></li>
<li><a href="https://juejin.cn/post/6844904000786006023">https://juejin.cn/post/6844904000786006023</a></li>
<li><a href="https://blog.csdn.net/u010650845/article/details/53520426">https://blog.csdn.net/u010650845/article/details/53520426</a></li>
<li><a href="https://juejin.cn/post/6948651938229518366#heading-5">https://juejin.cn/post/6948651938229518366#heading-5</a></li>
<li><a href="http://mpgedit.org/mpgedit/mpeg_format/mpeghdr.htm">http://mpgedit.org/mpgedit/mpeg_format/mpeghdr.htm</a></li>
</ul>
</div><div class="article-tags size-small mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/MultiMedia/">MultiMedia</a><a class="link-muted mr-2" rel="tag" href="/tags/MP3/">MP3</a></div><ul class="post-copyright"><li><strong>本文标题：</strong><a href="http://smileorigin.site/media/MP3/">MP3</a></li><li><strong>本文作者：</strong><a href="http://smileorigin.site">Thomas Woo</a></li><li><strong>发布时间：</strong>2021-09-09 20:30</li><li><strong>最后更新：</strong>2022-12-12 15:29</li><li><strong>本文链接：</strong><a href="http://smileorigin.site/media/MP3/">http://smileorigin.site/media/MP3/</a></li><li><strong>版权声明：</strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow" target="_blank">CC BY 4.0</a> 许可协议。转载请注明出处！</li></ul><!--!--></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button is-info donate"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="http://static.smileorigin.site/Alipay.jpg" alt="支付宝"></span></a><a class="button is-success donate"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="http://static.smileorigin.site/Wechatpay.png" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/media/FLAC/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">FLAC</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/media/SAR&amp;DAR/"><span class="level-item">DAR &amp; SAR</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div id="comment-container"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.6.2/dist/gitalk.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@1.6.2/dist/gitalk.min.js"></script><script>var gitalk = new Gitalk({
            id: '753ab12b7805e9b03912c2563a5375a5',
            repo: 'gittalk',
            owner: 'smileorigin',
            clientID: '8fb0efbb7d2496c108f3',
            clientSecret: '376c8cd0ff2283ef21dcf9bd1f8348014402bd24',
            admin: ["smileorigin"],
            createIssueManually: false,
            distractionFreeMode: false,
            perPage: 20,
            pagerDirection: 'last',
            
            
            enableHotKey: true
        })
        gitalk.render('comment-container')</script></div></div></div><div class="column column-right is-hidden-tablet-only is-3-desktop is-3-widescreen  order-3 is-sticky"><div class="card widget" id="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="is-flex" href="#比特率"><span class="mr-2">1</span><span>比特率</span></a></li><li><a class="is-flex" href="#设计限制"><span class="mr-2">2</span><span>设计限制</span></a></li><li><a class="is-flex" href="#格式分析"><span class="mr-2">3</span><span>格式分析</span></a><ul class="menu-list"><li><a class="is-flex" href="#MP3-Structure"><span class="mr-2">3.1</span><span>MP3 Structure</span></a></li><li><a class="is-flex" href="#ID3v2"><span class="mr-2">3.2</span><span>ID3v2</span></a><ul class="menu-list"><li><a class="is-flex" href="#ID3v2-header"><span class="mr-2">3.2.1</span><span>ID3v2 header</span></a></li><li><a class="is-flex" href="#ID3v2-extended-header"><span class="mr-2">3.2.2</span><span>ID3v2 extended header</span></a></li><li><a class="is-flex" href="#Frame-header-flags"><span class="mr-2">3.2.3</span><span>Frame header flags</span></a></li></ul></li><li><a class="is-flex" href="#MP3-Frame"><span class="mr-2">3.3</span><span>MP3 Frame</span></a><ul class="menu-list"><li><a class="is-flex" href="#Bitrate-index"><span class="mr-2">3.3.1</span><span>Bitrate index</span></a></li><li><a class="is-flex" href="#Frame-Length"><span class="mr-2">3.3.2</span><span>Frame Length</span></a></li><li><a class="is-flex" href="#Frame-Duration"><span class="mr-2">3.3.3</span><span>Frame Duration</span></a></li><li><a class="is-flex" href="#Side-Info"><span class="mr-2">3.3.4</span><span>Side Info</span></a></li></ul></li><li><a class="is-flex" href="#Encoding"><span class="mr-2">3.4</span><span>Encoding</span></a><ul class="menu-list"><li><a class="is-flex" href="#VBR-Header"><span class="mr-2">3.4.1</span><span>VBR Header</span></a></li><li><a class="is-flex" href="#VBRI-Header"><span class="mr-2">3.4.2</span><span>VBRI Header</span></a></li><li><a class="is-flex" href="#Duration-calc"><span class="mr-2">3.4.3</span><span>Duration calc</span></a></li><li><a class="is-flex" href="#Seek"><span class="mr-2">3.4.4</span><span>Seek</span></a></li></ul></li><li><a class="is-flex" href="#FFMPEG-转换音频"><span class="mr-2">3.5</span><span>FFMPEG 转换音频</span></a></li></ul></li><li><a class="is-flex" href="#Reference"><span class="mr-2">4</span><span>Reference</span></a></li></ul></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">SMILEORIGIN</a><p class="size-small"><span>&copy; 2022 Thomas Woo</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a> <a class="has-link-black-ter" href="https://beian.miit.gov.cn/" target="_blank">闽ICP备18024126号-2</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large icon-button" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large icon-button" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large icon-button" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/smileorigin/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'http://smileorigin.site',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><div id="outdated"><h6>Your browser is out-of-date!</h6><p>Update your browser to view this website correctly.&amp;npsb;<a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update my browser now </a></p><p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">×</a></p></div><script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script><script>window.addEventListener("load", function () {
            outdatedBrowser({
                bgColor: '#f25648',
                color: '#ffffff',
                lowerThan: 'object-fit' // display on IE11 or below
            });
        });</script><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>