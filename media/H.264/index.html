<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>H.264 - Thomas Woo</title><meta description="H.264&amp;#x2F;AVC，又称为 MPEG-4第10部分，高级视频编码（MPEG-4 Part 10 Advanced Video Coding，缩写为 MPEG-4 AVC）是一种面向块，基于运动补偿的视频编码标准。由 ITU-T视频编码专家组 与 ISO&amp;#x2F;IEC 联合工作组（MPEG，动态图像专家组）联合组成的联合视频组（JVT，Joint Video Team）发布"><meta property="og:type" content="blog"><meta property="og:title" content="H.264"><meta property="og:url" content="http://smileorigin.site/media/H.264/"><meta property="og:site_name" content="Thomas Woo"><meta property="og:description" content="H.264&amp;#x2F;AVC，又称为 MPEG-4第10部分，高级视频编码（MPEG-4 Part 10 Advanced Video Coding，缩写为 MPEG-4 AVC）是一种面向块，基于运动补偿的视频编码标准。由 ITU-T视频编码专家组 与 ISO&amp;#x2F;IEC 联合工作组（MPEG，动态图像专家组）联合组成的联合视频组（JVT，Joint Video Team）发布"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/smileorigin/images/2021/20220101161340.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/smileorigin/images/2021/20220101161310.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/smileorigin/images/2021/20220101161416.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/smileorigin/images/2021/20211227163041.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/smileorigin/images/2021/20220101161455.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/smileorigin/images/2021/20220108162252.png"><meta property="article:published_time" content="2022-01-01T07:00:00.000Z"><meta property="article:modified_time" content="2022-12-12T07:58:46.537Z"><meta property="article:author" content="Thomas Woo"><meta property="article:tag" content="MultiMedia"><meta property="article:tag" content="H.264"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://cdn.jsdelivr.net/gh/smileorigin/images/2021/20220101161340.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://smileorigin.site/media/H.264/"},"headline":"Thomas Woo","image":["https://cdn.jsdelivr.net/gh/smileorigin/images/2021/20220101161340.png","https://cdn.jsdelivr.net/gh/smileorigin/images/2021/20220101161310.png","https://cdn.jsdelivr.net/gh/smileorigin/images/2021/20220101161416.png","https://cdn.jsdelivr.net/gh/smileorigin/images/2021/20211227163041.png","https://cdn.jsdelivr.net/gh/smileorigin/images/2021/20220101161455.png","https://cdn.jsdelivr.net/gh/smileorigin/images/2021/20220108162252.png"],"datePublished":"2022-01-01T07:00:00.000Z","dateModified":"2022-12-12T07:58:46.537Z","author":{"@type":"Person","name":"Thomas Woo"},"description":"H.264&#x2F;AVC，又称为 MPEG-4第10部分，高级视频编码（MPEG-4 Part 10 Advanced Video Coding，缩写为 MPEG-4 AVC）是一种面向块，基于运动补偿的视频编码标准。由 ITU-T视频编码专家组 与 ISO&#x2F;IEC 联合工作组（MPEG，动态图像专家组）联合组成的联合视频组（JVT，Joint Video Team）发布"}</script><link rel="canonical" href="http://smileorigin.site/media/H.264/"><link rel="alternative" href="/atom.xml" title="Thomas Woo" type="application/atom+xml"><link rel="icon" href="/img/favicon.ico"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><script>var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?33cec7dfd968d9ffd9ff2a5da2be77d0";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-110922455-1" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-110922455-1');</script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css"></head><body class="is-2-column"><script type="text/javascript" src="/js/dark.js"></script><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">SMILEORIGIN</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/album">Album</a><a class="navbar-item" href="/bbs">BBS</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" id="dark-switch" title="Dark Mode" href="javascript:;"><i class="fas fa-moon" id="dark-icon"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-12-tablet is-9-desktop is-9-widescreen "><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2022-01-01T07:00:00.000Z" title="2022-01-01T07:00:00.000Z">2022-01-01</time><span class="level-item"><a class="link-muted" href="/categories/MultiMedia/">MultiMedia</a></span><span class="level-item">16 分钟 读完 (大约 2473 个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">H.264</h1><div class="content"><p><strong>H.264&#x2F;AVC</strong>，又称为 <strong>MPEG-4第10部分，高级视频编码</strong>（MPEG-4 Part 10 Advanced Video Coding，缩写为 MPEG-4 AVC）是一种面向块，基于<a href="https://zh.wikipedia.org/wiki/%E8%BF%90%E5%8A%A8%E8%A1%A5%E5%81%BF">运动补偿</a>的视频编码标准。由 <a href="https://zh.wikipedia.org/wiki/ITU-T">ITU-T</a><a href="https://zh.wikipedia.org/wiki/%E8%A7%86%E9%A2%91%E7%BC%96%E7%A0%81%E4%B8%93%E5%AE%B6%E7%BB%84">视频编码专家组</a> 与 <a href="https://zh.wikipedia.org/wiki/ISO">ISO</a>&#x2F;<a href="https://zh.wikipedia.org/wiki/IEC">IEC</a> 联合工作组（<a href="https://zh.wikipedia.org/wiki/MPEG">MPEG</a>，动态图像专家组）联合组成的联合视频组（<a href="https://zh.wikipedia.org/wiki/JVT">JVT</a>，Joint Video Team）发布<a id="more"></a></p>
<p>H.264 项目的目的是为了创建一个更佳的视频压缩标准，在更低的比特率的情况下依然能够提供良好视频质量的标准。同时，还要不会太大的增加设计的复杂性。H.264 的另外一个目标是提供足够的灵活性，以允许该标准能够应用于各种各样的网络和系统上，包括低和高比特率、低和高分辨率视频、广播、DVD存储、RTP&#x2F;IP 分组网络和 ITU-T 多媒体电话系统。H.264 标准可以被视为由多个不同的应用框架&#x2F;配置文件组成的“标准系列”</p>
<h4 id="为什么需要对视频进行编码压缩"><a href="#为什么需要对视频进行编码压缩" class="headerlink" title="为什么需要对视频进行编码压缩"></a>为什么需要对视频进行编码压缩</h4><p>视频本质上是由一张张的图像组成的，将这些图像以一定的时间间隔连续播放就是我们所看到的视频。若有一个分辨率为 1080P，帧率为 60FPS 的视频（使用 YUV 存储）不经压缩每秒钟需要占用的空间约为：<code>1920 * 1080 * 3/2 * 60 = 186624000B ≈ 178MB</code>，200Mbps 的带宽每秒钟的下载速度是 25MB&#x2F;s 左右，需要花费 7s 才能将这一秒的视频下载下来，这是完全不能满足实时播放的需求的，要满足实时播放就需要至少 1.4Gbps 的带宽。H.264 的压缩比能达到  1:100 ～ 1:50，就能将 355.95MB 的视频能压缩到 1.8MB ～ 3.6MB，最高只需要 29 Mbps 的带宽就能满足实时播放的需求</p>
<h2 id="H-264-基础概念"><a href="#H-264-基础概念" class="headerlink" title="H.264 基础概念"></a>H.264 基础概念</h2><p>在 H.264&#x2F;AVC 在概念上可以分为两层：<strong>视频编码层（VCL，Video Coding Layer）</strong>和<strong>网络抽象层（NAL，Network Abstraction Layer）</strong>。视频编码层面负责高效的表示视频数据内容（H.264 编码压缩的核心，主要负责将视频数据进行编码&#x2F;压缩和切分），网络抽象层负责格式化数据并提供头信息，以保证数据适合在各种信道和存储介质上传播</p>
<p>H.264 可以分为序列（GOP）、图像（Pictrue）、⽚（Slice）、宏块（Macroblock）、⼦宏块（Sub-Macroblock）五个层次。H.264 把图像分为帧（Frame）和场（Field，分为顶场和底场，一帧相当于两场），其中帧可以分为一个或几个片；片由宏块组成，宏块是编码处理的基本单元，宏块包含一个 16x16 像素的亮度块和两个相应的色度块。对于 H.264 标准来说，I 帧、B 帧、P 帧都是我们把图像这个概念具体化和细小化了，通常说的 “帧” 是指不分场的图像</p>
<img src="https://cdn.jsdelivr.net/gh/smileorigin/images/2021/20220101161340.png" style="margin-left: auto; margin-right: auto; display: block;" />

<h2 id="H-264-码流"><a href="#H-264-码流" class="headerlink" title="H.264 码流"></a>H.264 码流</h2><p>H.264 的码流由一个个的 NAL 单元（NAL unit，网络抽象层单元）组成，每个 NAL 单元可以封装一个 Slice 或者 SPS、PPS 等信息。H.264 码流也可称为 NAL 单元流（NAL unit stream），NAL 单元流的组成形式分为两种：Annex B 和 AVCC，Android 硬解码只支持 Annex B，苹果的 VideoToolbox 和浏览器的 MSE 只支持 AVCC。Annex B 和 AVCC 只是在 NAL 单元流的组织形式上有所不同，NAL 单元的结构是一致的遵循同一标准</p>
<h3 id="Annex-B"><a href="#Annex-B" class="headerlink" title="Annex B"></a>Annex B</h3><p>又称 MPEG-2 Transport Stream（MPEG-TS，ts 格式）。每个 NAL 单元使用起始码分隔开，起始码有两种 <strong>0x000001（3 Byte）</strong>和 <strong>0x00000001（4 Byte）</strong>。在标准中只有 3 字节的起始码前缀的说法（<code>start_code_prefix_one_3bytes = 0x000001</code>），所谓的 4 字节起始码是由 <code>zero_byte(0x00) + start_code_prefix_one_3bytes</code> 组成</p>
<img src="https://cdn.jsdelivr.net/gh/smileorigin/images/2021/20220101161310.png" style="margin-left: auto; margin-right: auto; display: block;" />

<p>以下两种情况使用 4 字节起始码，其他的情况使用 3 字节起始码：</p>
<ol>
<li>该 NAL 单元类型是 SPS（NAL unit type &#x3D;&#x3D; 7） 或 PPS（NAL unit type &#x3D;&#x3D; 8）（NAL 单元类型会在下文展开）</li>
<li>若该 NAL 单元是一个访问单元（Access unit，一组 NAL 单元）的第一个 NAL 单元</li>
</ol>
<img src="https://cdn.jsdelivr.net/gh/smileorigin/images/2021/20220101161416.png" style="margin-left: auto; margin-right: auto; display: block;" />



<h4 id="防竞争字节（Emulation-Prevention-Byte）"><a href="#防竞争字节（Emulation-Prevention-Byte）" class="headerlink" title="防竞争字节（Emulation Prevention Byte）"></a>防竞争字节（Emulation Prevention Byte）</h4><p>由于 NAL 单元会使用 <strong>0x000001</strong> 或 <strong>0x00000001</strong> 做为起始码，为了防止在 NAL 单元内部出现起始码将一个 NAL 单元错误的分成几个，H.264 使用防竞争字节来解决该问题（0x30）。当编码器编完一个 NAL 单元时，应检测 NAL 单元内部是否出现如下左侧的四个字节序列，如果存在则在最后一个字节中间插入 <strong>0x30</strong>，在解码过程中再将防竞争字节去除即可</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">0x000000 =&gt; 0x00000300    （0x000000，可作为当前 NAL 单元的结束标志）</span><br><span class="line">0x000001 =&gt; 0x00000301    （0x000001，起始码）   </span><br><span class="line">0x000002 =&gt; 0x00000302    （0x000002，作为保留使用）</span><br><span class="line">0x000003 =&gt; 0x00000303    （0x000003，避免 NAL 单元内部原本就存在字节序列 0x000003 的情况）</span><br></pre></td></tr></table></figure>

<p>虽然 AVCC 没有使用起始码来分隔 NAL 单元但是也会进行防字节竞争处理，依据为下文的 “NAL unit 语法” 部分描述的 NAL 单元内部的防竞争码处理并不区分 Annex B 或 AVCC</p>
<h4 id="实例分析"><a href="#实例分析" class="headerlink" title="实例分析"></a>实例分析</h4><img src="https://cdn.jsdelivr.net/gh/smileorigin/images/2021/20211227163041.png" style="margin-left: auto; margin-right: auto; display: block;" />

<p>红色框为起始码（以下序号对应图上<strong>红</strong>字序号）：</p>
<ol>
<li><code>00 00 00 01</code>，为 4 字节起始码，是一个 AUD 单元</li>
<li><code>00 00 00 01</code>，为 4 字节起始码，是一个 SPS 单元</li>
<li><code>00 00 00 01</code>，为 4 字节起始码，是一个 PPS 单元</li>
<li><code>00 00 01</code>，为 3 字节起始码，是一个 SEI 单元</li>
<li><code>00 00 01</code>，为 3 字节起始码，是一个 IDR 图像单元</li>
</ol>
<p>蓝色框为被防竞争处理过的数据（以下序号对应图上<strong>蓝</strong>字序号）：</p>
<ol>
<li><code>00 00 03 00</code>，原数据为 <code>00 00 00</code></li>
<li><code>00 00 03 01</code>，原数据为 <code>00 00 01</code></li>
<li><code>00 00 03 00</code>，原数据为 <code>00 00 00</code></li>
</ol>
<h3 id="AVCC"><a href="#AVCC" class="headerlink" title="AVCC"></a>AVCC</h3><p>又称为 AVC1、MPEG-4 格式，用于 mp4、flv、mkv。每个 NAL 单元前都有一个固定长度的 NAL unit Length（通常是 4 字节）表示该 NAL 单元的大小（字节），该 NAL unit Length 占用几字节需要从 extradata 获取。extradata 在 MP4 封装的文件中一般存储在 MOOV 的 avc1 box 中（<code>MOOV/trak/mdia/minf/stbl/stsd/avc1</code>），实例分析见下文</p>
<img src="https://cdn.jsdelivr.net/gh/smileorigin/images/2021/20220101161455.png" style="margin-left: auto; margin-right: auto; display: block;" />

<p>extradata 格式：</p>
<p>SPS、PPS、SPS 扩展具体内容及结构请查看后续文章<strong>《H.264 标准语法分析》</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">aligned(8) class AVCDecoderConfigurationRecord &#123;</span><br><span class="line">    unsigned int(8) configurationVersion = 1;                                    // 8 bit，总是 0x01</span><br><span class="line">    unsigned int(8) AVCProfileIndication;                                        // 8 bit，表示所使用的 profile，SPS 中的第一字节内容</span><br><span class="line">    unsigned int(8) profile_compatibility;                                       // 8 bit，SPS 中第二字节的内容，指示是否强制使用某个 profile</span><br><span class="line">    unsigned int(8) AVCLevelIndication;                                          // 8 bit，编码时使用的 level，值越大对解码器要求越高，SPS 中的第三字节的内容</span><br><span class="line">    bit(6) reserved = ‘111111’b;                                                 // 6 bit，保留</span><br><span class="line">    unsigned int(2) lengthSizeMinusOne;                                          // 2 bit，值为 NAL unit length - 1</span><br><span class="line">    bit(3) reserved = ‘111’b;                                                    // 3 bit，保留</span><br><span class="line">    unsigned int(5) numOfSequenceParameterSets;                                  // 5 bit，值为 SPS 个数</span><br><span class="line">    <span class="keyword">for</span> (i=0; i &lt; numOfSequenceParameterSets; i++) &#123;                             // 遍历所有的 SPS</span><br><span class="line">        unsigned int(16) sequenceParameterSetLength ;                            // 16 bit，值为当前 SPS 长度</span><br><span class="line">        bit(8*sequenceParameterSetLength) sequenceParameterSetNALUnit;           // SPS 数据</span><br><span class="line">    &#125;</span><br><span class="line">    unsigned int(8) numOfPictureParameterSets;                                   // 8 bit，值为 PPS 个数</span><br><span class="line">    <span class="keyword">for</span> (i=0; i &lt; numOfPictureParameterSets; i++) &#123;                              // 遍历所有的 PPS</span><br><span class="line">    	unsigned int(16) pictureParameterSetLength;                              // 16 bit，值为当前 PPS 长度</span><br><span class="line">    	bit(8*pictureParameterSetLength) pictureParameterSetNALUnit;             // PPS 数据</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (profile_idc == 100 || profile_idc == 110 ||                              // 若 profile 类别为 100、110、122、144</span><br><span class="line">    	profile_idc == 122 || profile_idc == 144) &#123;                              // 则还包含以下信息</span><br><span class="line">        bit(6) reserved = ‘111111’b;                                             // 6 bit，保留</span><br><span class="line">        unsigned int(2) chroma_format;                                           // 2 bit，表示使用的 YUV 类型</span><br><span class="line">        bit(5) reserved = ‘11111’b;                                              // 5 bit，保留</span><br><span class="line">        unsigned int(3) bit_depth_luma_minus8;                                   // 3 bit，亮度比特深度 - 8</span><br><span class="line">        bit(5) reserved = ‘11111’b;                                              // 5 bit，保留</span><br><span class="line">        unsigned int(3) bit_depth_chroma_minus8;                                 // 3 bit，色度比特深度 - 8</span><br><span class="line">        unsigned int(8) numOfSequenceParameterSetExt;                            // 8 bit，SPS 扩展个数</span><br><span class="line">        <span class="keyword">for</span> (i=0; i &lt; numOfSequenceParameterSetExt; i++) &#123;                       // 遍历 SPS 扩展</span><br><span class="line">            unsigned int(16) sequenceParameterSetExtLength;                      // 16 bit，值为当前 SPS 扩展单元长度</span><br><span class="line">            bit(8*sequenceParameterSetExtLength) sequenceParameterSetExtNALUnit; // SPS 扩展单元数据</span><br><span class="line">        &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p style="text-align:center;width=100;">ISO_IEC_14496-15-AVC-format-2012 5.2.4.1.1 Syntax</b></p>

<h4 id="实例分析-1"><a href="#实例分析-1" class="headerlink" title="实例分析"></a>实例分析</h4><p>如下图为 MP4 封装的文件的 avc1 box</p>
<img src="https://cdn.jsdelivr.net/gh/smileorigin/images/2021/20220108162252.png" style="margin-left: auto; margin-right: auto; display: block;" />

<ul>
<li><p>白色框</p>
<p>  前四字节（<code>00 00 00 38</code>）表示该 avc1box 的长度为 56 字节，后四字节（<code>61 76 63 43</code>）表示该 box 的类型为 avcC</p>
</li>
<li><p>红色框</p>
<p>  为 extradata 开始部分，第一字节（<code>01</code>）表示 <strong>configurationVersion</strong> 值为 1；第二字节（<code>64</code>）表示 <strong>AVCProfileIndication</strong> 值为 100；第三字节（<code>00</code>）表示 <strong>profile_compatibility</strong> 值为 0；第四字节（<code>2A</code>）表示 <strong>AVCLevelIndication</strong> 值为 42；第五字节（<code>FF</code>）最后两位表示 <strong>lengthSizeMinusOne</strong> 值为 3</p>
</li>
<li><p>橙色框</p>
<p>  第一个橙色框第一字节（<code>E1</code>）最后五位表示 SPS 个数值为 1；第二个橙色框（<code>00 1A</code>）表示 SPS 长度，值为 26</p>
</li>
<li><p>蓝色框</p>
<p>  第一个蓝色框（<code>01</code>）表示 PPS 的个数，值为 1；第二个蓝色框（<code>00 07</code>）表示 PPS 长度，值为 7</p>
</li>
<li><p>黄色框</p>
<p>  第一字节（<code>FD</code>）最后两位表示 <strong>chroma_format</strong>，值为 1，表示使用 YUV 4:2:0；第二字节（<code>F8</code>）最后三位表示 <strong>bit_depth_luma_minus8</strong>，值为 0；第三字节（<code>F8</code>）最后三位表示 <strong>bit_depth_chroma_minus8</strong> 值为 0</p>
</li>
<li><p>紫色框</p>
<p>  表示 SPS 扩展个数，值为 0</p>
</li>
</ul>
<h2 id="分析工具（macOS）"><a href="#分析工具（macOS）" class="headerlink" title="分析工具（macOS）"></a>分析工具（macOS）</h2><ol>
<li><a href="https://github.com/HexFiend/HexFiend">Hex fiend</a></li>
<li><a href="https://github.com/IENT/YUView">YUView</a></li>
</ol>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.itu.int/rec/T-REC-H.264/e">https://www.itu.int/rec/T-REC-H.264/e</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/86721709">https://zhuanlan.zhihu.com/p/86721709</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/71928833">https://zhuanlan.zhihu.com/p/71928833</a></li>
<li><a href="https://blog.xujingkai.cn/post/avcC-annexB/">https://blog.xujingkai.cn/post/avcC-annexB/</a></li>
<li><a href="https://zh.wikipedia.org/wiki/H.264/MPEG-4_AVC">https://zh.wikipedia.org/wiki/H.264/MPEG-4_AVC</a></li>
<li><a href="https://www.cnblogs.com/ssyfj/p/14624498.html">https://www.cnblogs.com/ssyfj/p/14624498.html</a></li>
<li><a href="https://blog.csdn.net/leixiaohua1020/article/details/50534369?spm=1001.2014.3001.5501">https://blog.csdn.net/leixiaohua1020/article/details/50534369?spm=1001.2014.3001.5501</a></li>
</ul>
</div><div class="article-tags size-small mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/MultiMedia/">MultiMedia</a><a class="link-muted mr-2" rel="tag" href="/tags/H-264/">H.264</a></div><ul class="post-copyright"><li><strong>本文标题：</strong><a href="http://smileorigin.site/media/H.264/">H.264</a></li><li><strong>本文作者：</strong><a href="http://smileorigin.site">Thomas Woo</a></li><li><strong>发布时间：</strong>2022-01-01 15:00</li><li><strong>最后更新：</strong>2022-12-12 15:58</li><li><strong>本文链接：</strong><a href="http://smileorigin.site/media/H.264/">http://smileorigin.site/media/H.264/</a></li><li><strong>版权声明：</strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow" target="_blank">CC BY 4.0</a> 许可协议。转载请注明出处！</li></ul><!--!--></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button is-info donate"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="http://static.smileorigin.site/Alipay.jpg" alt="支付宝"></span></a><a class="button is-success donate"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="http://static.smileorigin.site/Wechatpay.png" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/media/H.264%20%E6%A0%87%E5%87%86%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">H.264 标准语法分析（未完）</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/media/FLAC/"><span class="level-item">FLAC</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div id="comment-container"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.6.2/dist/gitalk.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@1.6.2/dist/gitalk.min.js"></script><script>var gitalk = new Gitalk({
            id: '9039398f76ba4e2fc538f89d562e18e3',
            repo: 'gittalk',
            owner: 'smileorigin',
            clientID: '8fb0efbb7d2496c108f3',
            clientSecret: '376c8cd0ff2283ef21dcf9bd1f8348014402bd24',
            admin: ["smileorigin"],
            createIssueManually: false,
            distractionFreeMode: false,
            perPage: 20,
            pagerDirection: 'last',
            
            
            enableHotKey: true
        })
        gitalk.render('comment-container')</script></div></div></div><div class="column column-right is-hidden-tablet-only is-3-desktop is-3-widescreen  order-3 is-sticky"><div class="card widget" id="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><ul class="menu-list"><ul class="menu-list"><li><a class="is-flex" href="#为什么需要对视频进行编码压缩"><span class="mr-2">1.1.1</span><span>为什么需要对视频进行编码压缩</span></a></li></ul></ul><li><a class="is-flex" href="#H-264-基础概念"><span class="mr-2">2</span><span>H.264 基础概念</span></a></li><li><a class="is-flex" href="#H-264-码流"><span class="mr-2">3</span><span>H.264 码流</span></a><ul class="menu-list"><li><a class="is-flex" href="#Annex-B"><span class="mr-2">3.1</span><span>Annex B</span></a><ul class="menu-list"><li><a class="is-flex" href="#防竞争字节（Emulation-Prevention-Byte）"><span class="mr-2">3.1.1</span><span>防竞争字节（Emulation Prevention Byte）</span></a></li><li><a class="is-flex" href="#实例分析"><span class="mr-2">3.1.2</span><span>实例分析</span></a></li></ul></li><li><a class="is-flex" href="#AVCC"><span class="mr-2">3.2</span><span>AVCC</span></a><ul class="menu-list"><li><a class="is-flex" href="#实例分析-1"><span class="mr-2">3.2.1</span><span>实例分析</span></a></li></ul></li></ul></li><li><a class="is-flex" href="#分析工具（macOS）"><span class="mr-2">4</span><span>分析工具（macOS）</span></a></li><li><a class="is-flex" href="#Reference"><span class="mr-2">5</span><span>Reference</span></a></li></ul></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">SMILEORIGIN</a><p class="size-small"><span>&copy; 2022 Thomas Woo</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a> <a class="has-link-black-ter" href="https://beian.miit.gov.cn/" target="_blank">闽ICP备18024126号-2</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large icon-button" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large icon-button" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large icon-button" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/smileorigin/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'http://smileorigin.site',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><div id="outdated"><h6>Your browser is out-of-date!</h6><p>Update your browser to view this website correctly.&amp;npsb;<a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update my browser now </a></p><p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">×</a></p></div><script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script><script>window.addEventListener("load", function () {
            outdatedBrowser({
                bgColor: '#f25648',
                color: '#ffffff',
                lowerThan: 'object-fit' // display on IE11 or below
            });
        });</script><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>